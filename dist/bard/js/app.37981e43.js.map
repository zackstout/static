{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/App.vue?a56c","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?bfbe","webpack:///./src/App.vue","webpack:///./src/components/Play.vue?2530","webpack:///./src/EventBus.ts","webpack:///./src/assets/d3/index.js","webpack:///./src/utils.js","webpack:///./src/components/Play.vue?7878","webpack:///./src/components/Play.vue?db2d","webpack:///./src/components/Play.vue","webpack:///./src/components/Home.vue?6cdb","webpack:///./src/components/Home.vue?3513","webpack:///./src/components/Home.vue?0dad","webpack:///./src/components/Home.vue","webpack:///./src/components/Character.vue?f29d","webpack:///./src/components/Character.vue?e91a","webpack:///./src/components/Character.vue?244e","webpack:///./src/components/Character.vue","webpack:///./src/components/Scene.vue?24d3","webpack:///./src/components/Scene.vue?7dd3","webpack:///./src/components/Scene.vue?6afb","webpack:///./src/components/Scene.vue","webpack:///./src/main.ts","webpack:///./src/components/Play.vue?774e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","App","component","staticStyle","_l","staticClass","style","play","on","$event","goPlay","_v","_s","label","playLabel","_m","directives","rawName","expression","$$selectedVal","Array","filter","target","options","selected","map","val","_value","minLengthSelectOption","multiple","opt","domProps","speeches","speech","title","speaker","lines","line","getLineStyle","EVENTS","CLICK_SCENE","CLICK_SPEAKER","EventBus","select","selectAll","scaleLinear","scaleBand","scaleTime","scaleOrdinal","axisTop","axis","axisBottom","axisLeft","area","group","extent","curveCardinal","hierarchy","treemap","plays","sort","a","b","console","log","CHAR_COLORS","getSceneBreakdown","scene","numLines","speakerAmts","type","speakers","forEach","keys","getPlayBreakdown","scenes","getLinesBySpeakerByChunk","chunkSize","res","getSpeakers","chunkIdx","lineNo","sceneIdx","includes","slug","replace","getSpeeches","idx","getCharacterInteractions","interactions","prevSpeaker","getInteractionTotals","otherSpeaker","pairRep","join","pair","getCharColor","runPiecharts","playData","width","height","margin","left","top","bottom","right","d3","remove","svg","append","attr","scenesPerAct","actNum","sceneNum","split","x","parseInt","maxScenesPerAct","Math","max","bd","treeData","children","amt","charName","charIdx","findIndex","fill","root","sum","WIDTH_SCL","HEIGHT_SCL","PADDING","size","padding","leaves","enter","x0","y0","x1","y1","ev","$emit","dataset","y","range","domain","runCharacters","w","h","bandwidth","runInteractions","names","idxs","fills","runRidgelines","overlap","xScale","xValue","xAxis","yScale","yValue","speakerScale","speakerValue","speakerAxis","curve","lineY1","dataFlat","spkrs3","areaChartHeight","innerHTML","gSpeaker","ty","datum","minLengthSelectOptions","allSpeakers","mounted","loadData","$on","goScene","goCharacter","routeChanged","then","innerWidth","charInteractions","totals","chartWidth","chartHeight","catch","e","error","getSpeechesOfMinLength","find","reduce","acc","getCharStyle","col","color","textShadow","$router","Play","character","$route","params","Character","prevScene","_e","allScenes","nextScene","char","sceneData","fontWeight","marginTop","Scene","use","router","routes","path","Home","props","route","config","productionTip","$mount"],"mappings":"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","file":"js/app.37981e43.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n/*\nNOTES: If play or character or whatever is not in list, need to show \"404\" page\n\n[ ] Represent in scene: numlines, percent of play\nOoooh maybe like a clock that shows a sliver, and where in play it is. I like that.\n\n[ ] TODO: Add character view\n\n[ ] add sidebar to Scene (and char) view\n\n[ ] relationships! (Must be added manually....)\n\n[ ] turn off text shadow...in general, style combos dropdown\n\n[ ] TODO: Search!! ACROSS ALL PLAYS, from home\n\n[ ] Navigation duplicated issue\n(looks like emmpty catch after router.push should silence the error)\n\n[ ] filter by speaker/all in play/Speeches\n\n[ ] line numbers?\n\n[ ] Checkboxes to show/hide graphs \n(bc want to have highlight behavior on one affect others)\n\n[ ] Clean up chart margin weirdness (number of things...Height of first one overflowing top....stuff going off to right...)\n\n[ ] Clean up all hover/click\n\n[ ] Add all click/routing behavior\n\n\n[ ] Find 20 visibly distinct colors\n\n[ ] Hmm...brutus_lucius interaction rate looks way too high...\n[ ] \"ROSENCRANTZ:\"\n\n[ ] Clean up data stuff\nLike...Do we ever want to save data? In the json? Or just chill for now\n\n[ ] Sorting\n\n[ ] Expose other options (curve type e.g.)\n\n\n[x] TODO: Add character colors! (maybe text shadow to lines??)\n[x] TODO: Filter by speech length....within a play? Across all plays?\n[x] TODO: Fill interactions chart with real colors\n[x] TODO: Get curves back\n[x] TODO: Add \"piecharts\"\n[x] added click scene \"pie chart\"\n[x] Another vis idea: number of lines per speech in a play....just a bar graph I guess\nKind of a histogram I guess\nEh, it's not actually that cool\n[x] why isn't basic alphabetical sorting of plays working?\n[x] TODO: How to get hover on interactions chart to communicate to Ridges chart??\n=> Need EVENTBUS!\nfigure outhow to share data (char colors)...\nFeels like need to pass in to runRidgelines, at the least. Butneed to do more...\nScene needs to recompute or know about playBreakdown, to get speakerAmts...\nMaybe browser cache is smart enough to handle it?\n*/\n\n@Component({})\nexport default class App extends Vue {}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=eb153382&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{attrs:{\"id\":\"sidebar\"}},[_c('div',{staticStyle:{\"padding\":\"1rem\"}},_vm._l((_vm.plays),function(p){return _c('div',{key:p.value,staticClass:\"side-play\",style:({ 'font-weight': _vm.play === p.value ? 'bold' : '' }),on:{\"click\":function($event){return _vm.goPlay(p.value)}}},[_vm._v(\" \"+_vm._s(p.label)+\" \")])}),0)]),_c('div',{attrs:{\"id\":\"main\"}},[_c('h2',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.playLabel))]),_c('div',{staticClass:\"ridges-container\"}),_c('div',{staticClass:\"line\"}),_vm._m(0),_c('div',{staticClass:\"line\"}),_vm._m(1),_c('div',{staticClass:\"line\"}),_c('div',[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Speeches\")]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('span',{staticStyle:{\"margin-right\":\"3px\"}},[_vm._v(\"Minimum length:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.minLengthSelectOption),expression:\"minLengthSelectOption\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.minLengthSelectOption=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.minLengthSelectOptions),function(opt){return _c('option',{key:opt,domProps:{\"value\":opt}},[_vm._v(_vm._s(opt))])}),0)]),_c('div',{staticStyle:{\"font-style\":\"italic\",\"margin-top\":\"10px\"}},[_vm._v(\"Results: \"+_vm._s(_vm.speeches.length))])]),_c('div',_vm._l((_vm.speeches),function(speech,i){return _c('div',{key:i,staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(_vm._s(speech.title))]),_c('div',[_vm._v(\" \"+_vm._s(speech.data.speaker)+\" \"),_c('span',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\"(\"+_vm._s(speech.data.lines.length)+\" lines)\")])]),_c('div',_vm._l((speech.data.lines),function(line,i){return _c('div',{key:i,style:(_vm.getLineStyle(speech.data.speaker))},[_vm._v(\" \"+_vm._s(line)+\" \")])}),0)])}),0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"charts-container\"},[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Characters\")]),_c('div',{staticClass:\"characters-container\"})]),_c('div',[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Interactions\")]),_c('div',{staticClass:\"interactions-container\"})])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Scenes\")]),_c('div',{staticClass:\"pie-container\"})])}]\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nexport const EVENTS = {\n    CLICK_SCENE: \"CLICK_SCENE\",\n    CLICK_SPEAKER: \"CLICK_SPEAKER\"\n};\nexport const EventBus = new Vue();","import { select, selectAll } from 'd3-selection';\n\nimport {\n    scaleLinear,\n    scaleTime,\n    scaleOrdinal,\n    scaleBand\n} from 'd3-scale';\n\nimport { hierarchy, treemap } from 'd3-hierarchy';\n\nimport { area, curveCardinal } from 'd3-shape';\n\n// import { nest } from 'd3-collection';\n\nimport { group, extent } from 'd3-array';\n\nimport { axisTop, axisBottom, axisLeft } from 'd3-axis';\n\nexport default {\n    select,\n    selectAll,\n    scaleLinear,\n    scaleBand,\n    scaleTime,\n    scaleOrdinal,\n    axisTop,\n    axisBottom,\n    axisLeft,\n    area,\n    group,\n    extent,\n    curveCardinal,\n    hierarchy,\n    treemap\n};","\nimport d3 from \"@/assets/d3\";\nimport { EVENTS, EventBus } from \"@/EventBus\";\n\n\nexport const plays = [\n  { value: \"macbeth\", label: \"Macbeth\" },\n  { value: \"merchant\", label: \"Merchant of Venice\" },\n  { value: \"asyoulikeit\", label: \"As You Like It\" },\n  { value: \"1henryiv\", label: \"Henvry IV, Part 1\" },\n  { value: \"cleopatra\", label: \"Cleopatra\" },\n  { value: \"coriolanus\", label: \"Coriolanus\" },\n  { value: \"hamlet\", label: \"Hamlet\" },\n  { value: \"julius_caesar\", label: \"Julius Caesar\" },\n  { value: \"lear\", label: \"King Lear\" },\n  { value: \"measure\", label: \"Measure for Measure\" },\n  { value: \"midsummer\", label: \"Midummer Night's Dream\" },\n  { value: \"much_ado\", label: \"Much Ado About Nothing\" },\n  { value: \"othello\", label: \"Othello\" },\n  { value: \"richardii\", label: \"Richard II\" },\n  { value: \"richardiii\", label: \"Richard III\" },\n  { value: \"romeo_juliet\", label: \"Romeo & Juliet\" },\n  { value: \"tempest\", label: \"The Tempest\" },\n  { value: \"titus\", label: \"Titus Andronicus\" },\n  { value: \"troilus_cressida\", label: \"Troilus & Cressida\" },\n  { value: \"twelfth_night\", label: \"Twelfth Night\" },\n]\n  .sort((a, b) => a.label > b.label ? 1 : -1);\n\nconsole.log(\"plays\", plays);\n\n\nexport const emojiRelationships = {\n  \"murders\": \"🔫\",\n  \"loves\": \"💖\",\n  \"scorns\": \"\",\n  \"hates\": \"\",\n  \"serves\": \"\",\n  \"commands\": \"\", // redundant?\n  \"parents\": \"\",\n  \"childs\": \"\" // redundant?\n};\n\n\nexport const CHAR_COLORS = [\n  \"#6495ED\",\n  \"#40E0D0\",\n  \"#DE3163\",\n  \"#CCCCFF\",\n  \"#9FE2BF\",\n  \"#FFBF00\",\n  \"navy\",\n  \"maroon\",\n  \"teal\",\n  \"black\",\n  // \"white\",\n  // \"pink\",\n  // \"coral\",\n];\n\n\nexport const getSceneBreakdown = (scene) => {\n  if (!scene.lines) return { numLines: 0, speakerAmts: [] };\n  const numLines = scene.lines.filter((l) => l.type === \"text\").length;\n  const speakers = {};\n  // speakers items look like:\n  // macbeth: 30\n  scene.lines\n    .filter((l) => l.type === \"text\")\n    .forEach((line) => {\n      if (!speakers.hasOwnProperty(line.speaker)) {\n        speakers[line.speaker] = 0;\n      }\n      speakers[line.speaker]++;\n    });\n\n  // return speakers;\n\n  const speakerAmts = Object.keys(speakers)\n    .map((speaker) => {\n      return { speaker, value: speakers[speaker] / numLines };\n    })\n    .sort((a, b) => b.value - a.value);\n\n  return {\n    numLines,\n    speakerAmts,\n  };\n};\n\n\n// TODO: refacator to use getScenebrekadown\nexport const getPlayBreakdown = (scenes) => {\n  let numLines = 0;\n  const speakers = {};\n  // speakers items look like:\n  // macbeth: 30\n\n  scenes.forEach((scene) => {\n    scene.lines\n      .filter((l) => l.type === \"text\")\n      .forEach((line) => {\n        // console.log('line....', line.speaker);\n        if (!speakers.hasOwnProperty(line.speaker)) {\n          speakers[line.speaker] = 0;\n        }\n        numLines++;\n        speakers[line.speaker]++;\n      });\n  });\n\n  const speakerAmts = Object.keys(speakers)\n    .map((speaker) => {\n      return { speaker, value: speakers[speaker] / numLines };\n    })\n    .sort((a, b) => b.value - a.value);\n\n  return {\n    numLines,\n    speakerAmts,\n  };\n};\n\n\n\n\nexport const getLinesBySpeakerByChunk = (scenes, chunkSize = 10) => {\n  const res = [];\n  const speakers = getSpeakers(scenes);\n\n  speakers.forEach((speaker) => {\n    let chunkIdx = 0;\n    let lineNo = 0;\n    let numLines = 0;\n\n    scenes.forEach((scene, sceneIdx) => {\n      scene.lines.forEach((line) => {\n        if (line.type === \"text\") lineNo++;\n\n        if (line.type === \"text\" && line.speaker === speaker) numLines++;\n\n        if (lineNo % chunkSize === 0 && lineNo > 0) {\n          // save chunk, start new one\n          res.push({\n            speaker,\n            chunkIdx,\n            value: numLines,\n          });\n          lineNo = 0;\n          numLines = 0;\n          chunkIdx++;\n        }\n      });\n    });\n  });\n\n  return res;\n};\n\n\n\n\nfunction getSpeakers(scenes) {\n  const res = [];\n  scenes.forEach((scene) => {\n    scene.lines.forEach((line) => {\n      if (line.type === \"speech\" && !res.includes(line.value)) {\n        res.push(line.value);\n      }\n    });\n  });\n\n  return res;\n}\n\n\n\nfunction slug(name) {\n  return name.replace(/\\s/g, \"_\");\n}\n\n\n\n\nexport const getSpeeches = (scene) => {\n  const speeches = [];\n\n  let speech = {\n    speaker: \"\",\n    lines: [],\n  };\n  // console.log(scene);\n\n  scene.lines.forEach((line, idx) => {\n    if (idx === scene.lines.length - 1) {\n      // last line: push speech\n      speech.lines.push(line.value);\n      speeches.push(speech);\n      return;\n    }\n    if (line.type === \"speech\") {\n      // skip first speaker line:\n      if (speech.lines.length > 0) {\n        speeches.push(speech);\n        speech = {};\n        speech.lines = [];\n      }\n      speech.speaker = line.value;\n    } else {\n      speech.lines.push(line.value);\n    }\n  });\n\n  return speeches;\n};\n\n\n\n\n//   /*\n//   Idea here is to naively assume that when person B speaks directly after person A, they are interacting.s\n\n//   Hmm...we could alternatively try to weight interactions by num of lines\n//   */\nexport const getCharacterInteractions = (scenes) => {\n  const interactions = {};\n\n  scenes.forEach((scene) => {\n    const speeches = getSpeeches(scene);\n    let prevSpeaker = speeches[0].speaker;\n    speeches.slice(1).forEach((speech) => {\n      if (!interactions.hasOwnProperty(prevSpeaker)) {\n        interactions[prevSpeaker] = {};\n      }\n      if (!interactions[prevSpeaker].hasOwnProperty(speech.speaker)) {\n        interactions[prevSpeaker][speech.speaker] = 0;\n      }\n      interactions[prevSpeaker][speech.speaker]++;\n      prevSpeaker = speech.speaker;\n    });\n  });\n\n  return interactions;\n};\n\n\n\n\nexport const getInteractionTotals = (interactions) => {\n  const res = {};\n\n  Object.keys(interactions).forEach((speaker) => {\n    Object.keys(interactions[speaker]).forEach((otherSpeaker) => {\n      const pairRep = [speaker, otherSpeaker].sort().join(\"_\");\n      if (!res.hasOwnProperty(pairRep)) {\n        res[pairRep] = 0;\n      }\n      res[pairRep] += interactions[speaker][otherSpeaker];\n    });\n  });\n\n  // res is an object like {\"Banquo_Macbeth\": 42, ...}\n  return Object.keys(res)\n    .map((pair) => {\n      return { pair, value: res[pair] };\n    })\n    .sort((a, b) => b.value - a.value);\n  // return res;\n};\n\n\n\nexport const getCharColor = (idx) => {\n  // console.log(\"get fill\", idx);\n  if (idx < CHAR_COLORS.length) return CHAR_COLORS[idx];\n  return \"gray\";\n};\n\n\nexport const getTotalMarks = (scenes, target) => {\n  let total = 0;\n  let allChars = 0;\n\n  scenes.forEach(scene => {\n    scene.lines.forEach(line => {\n      line.value.split(\"\").forEach(char => {\n        if (char === target) total++;\n        allChars++;\n      });\n    });\n  });\n\n  return { total, allChars };\n};\n\n\n\nexport const groupLinesByNumber = (scenes) => {\n  // should be of form {1:10,2:20,3:12,4:0,....}\n  let res = {};\n  let maxLen = 0;\n\n  scenes.forEach(scene => {\n    const speeches = getSpeeches(scene);\n    speeches.forEach(speech => {\n      const len = speech.lines.length;\n      if (len > maxLen) maxLen = len;\n      if (!res.hasOwnProperty(len)) {\n        res[len] = 0;\n      }\n      res[len]++\n    })\n  });\n\n  const arr = [];\n  for (let i = 0; i < maxLen; i++)arr.push(i);\n\n  return arr.map(i => {\n    return {\n      lineLength: i,\n      value: res[i] ? res[i] : 0\n    }\n  });\n};\n\n\n\n\n\n// =================================================================================\n// CHARTS\n// =================================================================================\n\n\nexport const runPiecharts = (playData, speakerAmts = [], width = 500, height = 350) => {\n  const margin = { left: 80, top: 0, bottom: 0, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".pie\").remove();\n\n  var svg = d3\n    .select(\".pie-container\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .attr(\"class\", \"pie\")\n    .append(\"g\");\n\n  // console.log('running piecharts', svg)\n\n  const scenesPerAct = {};\n  playData.forEach(scene => {\n    const [actNum, sceneNum] = scene.title.split(\".\").map((x) => parseInt(x) - 1);\n    if (!scenesPerAct.hasOwnProperty(actNum)) {\n      scenesPerAct[actNum] = 0;\n    }\n    scenesPerAct[actNum]++;\n  });\n\n  const maxScenesPerAct = Math.max(...Object.keys(scenesPerAct).map(key => scenesPerAct[key]));\n  // console.log(\"max..\", maxScenesPerAct);\n\n  playData.forEach((scene) => {\n    const bd = getSceneBreakdown(scene);\n\n    const treeData = {\n      children: bd.speakerAmts.map((amt, i) => {\n        // TODO: index must be index in playBreeakdown.speakerAmts\n        // const i\n        const charName = amt.speaker;\n        const charIdx = speakerAmts.findIndex((x) => x.speaker === charName);\n        // return getCharColor(charIdx);\n        return { ...amt, ...{ fill: getCharColor(charIdx), title: scene.title } };\n      }),\n    };\n\n    // console.log(scene);\n\n    const [actNum, sceneNum] = scene.title.split(\".\").map((x) => parseInt(x) - 1);\n\n    var root = d3.hierarchy(treeData).sum(function (d) {\n      return d.value;\n    });\n\n    // const WIDTH_SCL = 0.17;\n\n    // TODO: Not correct.....\n    const WIDTH_SCL = 1 / (maxScenesPerAct + 1);\n    const HEIGHT_SCL = 0.17;\n    const PADDING = 10;\n\n    d3\n      .treemap()\n      // .size([(width * scene.lines.length) / avgNumLines, (height * scene.lines.length) / avgNumLines])\n      .size([(width - margin.left - PADDING * maxScenesPerAct) * WIDTH_SCL, height * HEIGHT_SCL])\n      .padding(2)(root);\n\n    svg\n      .selectAll(\"any_text_here_doesnt_matter\")\n      .data(root.leaves())\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", function (d) {\n        return d.x0;\n      })\n      .attr(\"y\", function (d) {\n        return d.y0;\n      })\n      .attr(\"width\", function (d) {\n        return d.x1 - d.x0;\n      })\n      .attr(\"height\", function (d) {\n        return d.y1 - d.y0;\n      })\n      .attr(\"cursor\", \"pointer\")\n      .style(\"stroke\", \"black\")\n      .attr(\"data-title\", function (d) {\n        // console.log(\"d\", d);\n        return d.data.title;\n      })\n      .style(\"fill\", function (d) {\n        // console.log(\"f\", d.data.fill);\n        return d.data.fill;\n        // return \"blue\";\n      })\n      .attr(\"transform\", function (d) {\n        return `translate(${margin.left + sceneNum * (width * WIDTH_SCL + PADDING)}, ${PADDING + actNum * (height * HEIGHT_SCL + PADDING)})`;\n      })\n      .on(\"click\", (ev) => {\n        // console.log(\"click\", ev.target.dataset.title)\n        EventBus.$emit(EVENTS.CLICK_SCENE, ev.target.dataset.title);\n      })\n  });\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain([0, 1, 2, 3, 4].map(n => `Act ${n + 1}`))\n    .padding(.1);\n  svg.append(\"g\")\n    .attr(\"transform\", `translate(${margin.left - 10},0)`)\n    .call(d3.axisLeft(y))\n    .selectAll(\"text\")\n    .attr(\"fill\", \"black\")\n};\n\n\n\n\n// data looks like [{lineLength:1,value:10},...]\nexport const runLinegroups = (data = [], width = 500, height = 300) => {\n  const margin = { left: 80, top: 0, bottom: 30, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".linegroups\").remove();\n\n  console.log(\"data..linegroup\", data);\n\n  var svg = d3.select(\".linegroups-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"linegroups\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const max = Math.max(...data.map(d => d.value));\n  console.log(\"max linegroup\", max);\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(data.map(d => d.lineLength))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.lineLength); })\n    .attr(\"width\", function (d) { return x(d.value); })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      // const idx = speakerAmts.findIndex(s => s.speaker === d.speaker);\n      // return getCharColor(idx);\n      return \"steelblue\"\n    });\n};\n\n\n\n\n\n\nexport const runCharacters = (data = {}, width = 500, height = 300) => {\n  const margin = { left: 80, top: 0, bottom: 30, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".characters\").remove();\n\n  // const data = speakerAmts;\n  const { numLines, speakerAmts } = data;\n  // console.log(data);\n\n  var svg = d3.select(\".characters-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"characters\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const max = Math.max(...speakerAmts.map(s => s.value)) * numLines;\n  // console.log(\"max\", max);\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(speakerAmts.map(function (d) { return d.speaker; }))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(speakerAmts)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.speaker); })\n    .attr(\"width\", function (d) { return x(d.value * numLines); })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      const idx = speakerAmts.findIndex(s => s.speaker === d.speaker);\n      return getCharColor(idx);\n    });\n};\n\n\n\n\nexport const runInteractions = (data, speakerAmts = [], width = 500, height = 300) => {\n  const margin = { left: 150, top: 0, bottom: 30, right: 30 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".interactions\").remove();\n\n  var svg = d3.select(\".interactions-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"interactions\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n  const max = Math.max(...data.map(s => s.value));\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(data.map(function (d) { return d.pair; }))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.pair); })\n    .attr(\"width\", function (d) { return x(d.value) / 2; })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      // console.log('get fill', d);\n      const names = d.pair.split(\"_\");\n      const idxs = names.map(name => speakerAmts.findIndex(s => s.speaker === name));\n      const fills = idxs.map(i => getCharColor(i));\n      // const fill = getCharColor()\n      return fills[0];\n      // return \"green\";\n      // return `linear-gradient(to right, blue, red)`;\n    })\n\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", function (d) { return x(d.value) / 2; })\n    .attr(\"y\", function (d) { return y(d.pair); })\n    .attr(\"width\", function (d) { return x(d.value) / 2; })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      const names = d.pair.split(\"_\");\n      const idxs = names.map(name => speakerAmts.findIndex(s => s.speaker === name));\n      const fills = idxs.map(i => getCharColor(i));\n      return fills[1];\n    })\n};\n\n\n\n\n\nexport const runRidgelines = (playData, chunkSize = 10, width = 500, height = 300, overlap = 0.6, speakerAmts = []) => {\n  const margin = { left: 100, top: 30, bottom: 30, right: 200 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  // TODO: This affects the top one weirdly...add margin top? Yeah...need more for fewer speakers\n  // Basicaclly areaChartHeightshould control marginTOp\n  // var overlap = 0.6;\n\n  var x = function (d) {\n    return d.chunkIdx;\n  },\n    xScale = d3.scaleLinear().range([0, width]),\n    xValue = function (d) {\n      return xScale(x(d));\n    },\n    xAxis = d3.axisBottom(xScale);\n\n  var y = function (d) {\n    return d.value;\n  },\n    yScale = d3.scaleLinear(),\n    yValue = function (d) {\n      return yScale(y(d));\n    };\n\n  var speaker = function (d) {\n    return d[0];\n  },\n    speakerScale = d3.scaleBand().range([0, height]),\n    speakerValue = function (d) {\n      return speakerScale(speaker(d));\n    },\n    speakerAxis = d3.axisLeft(speakerScale);\n\n  // Try  different  curve types!\n  var area = d3.area().x(xValue).y1(yValue).curve(d3.curveCardinal);\n\n  var line = area.lineY1();\n\n\n  // ==================\n\n  d3.selectAll(\".ridges\").remove();\n\n  var svg = d3\n    .select(\".ridges-container\")\n    .append(\"svg\")\n    .attr(\"class\", \"ridges\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const dataFlat = playData;\n  const spkrs3 = getLinesBySpeakerByChunk(dataFlat, chunkSize);\n  // console.log(\"got it\", spkrs3);\n\n  var data = d3\n    .group(spkrs3, d => d.speaker)\n\n  xScale.domain(d3.extent(spkrs3, x));\n\n  speakerScale.domain(\n    // [0, data.size - 1]\n    data.keys()\n  );\n\n  var areaChartHeight = (1 + overlap) * (h / speakerScale.domain().length);\n  // console.log(\"hgt\", areaChartHeight);\n  yScale.domain(d3.extent(spkrs3, y)).range([areaChartHeight, 0]);\n\n  area.y0(yScale(0));\n\n  svg\n    .append(\"g\")\n    .attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(0,\" + h + \")\")\n    .call(xAxis);\n\n  svg.append(\"g\").attr(\"class\", \"axis axis--activity\").call(speakerAxis);\n\n  svg\n    .selectAll(\".axis--activity .tick\")\n    .on(\"mouseover\", function (d, i) {\n      d3.selectAll(\".area\").attr(\"class\", \"area\");\n      d3.selectAll(\".axis--activity .tick\").attr(\"font-weight\", \"normal\");\n      d3.select(this).attr(\"font-weight\", \"bold\");\n      // console.log(\"hover...\", d);\n      const area = d3.select(`#area-${slug(d.target.innerHTML)}`);\n      area.attr(\"class\", \"area active\");\n    })\n    .on(\"mouseout\", function (d) {\n      d3.selectAll(\".area\").attr(\"class\", \"area\");\n      d3.selectAll(\".axis--activity .tick\").attr(\"font-weight\", \"normal\");\n    })\n    .on(\"click\", function (d) {\n      // runSpeaker(d);\n      // console.log(\"speaker click\", d.target.innerHTML);\n      EventBus.$emit(EVENTS.CLICK_SPEAKER, d.target.innerHTML);\n    });\n\n  var gSpeaker = svg\n    .append(\"g\")\n    .attr(\"class\", \"activities\")\n    .selectAll(\".activity\")\n    .data(data)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", function (d) {\n      return \"activity activity--\" + d[0];\n    })\n    .attr(\"transform\", function (d) {\n      var ty = speakerValue(d) - speakerScale.bandwidth() + 5;\n      return \"translate(0,\" + ty + \")\";\n    });\n\n  gSpeaker\n    .append(\"path\")\n    .attr(\"class\", \"area\")\n    .attr(\"id\", function (d, i) {\n      return `area-${slug(d[0])}`;\n    })\n    .attr(\"fill\", function (d) {\n      const idx = speakerAmts.findIndex(s => s.speaker === d[0]);\n      return getCharColor(idx);\n    })\n    .datum(function (d) {\n      const x = d[1];\n      return x;\n    })\n    .attr(\"d\", area);\n\n  gSpeaker\n    .append(\"path\")\n    .attr(\"class\", \"line\")\n    .datum(function (d) {\n      // return d.values;\n      return d[1];\n    })\n    .attr(\"d\", line);\n};\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { EVENTS, EventBus } from \"@/EventBus\";\nimport {\n  plays,\n  getPlayBreakdown,\n  runRidgelines,\n  getCharColor,\n  getSpeeches,\n  getCharacterInteractions,\n  getInteractionTotals,\n  runInteractions,\n  runCharacters,\n  getTotalMarks,\n  runPiecharts,\n  runLinegroups,\n  groupLinesByNumber,\n} from \"@/utils\";\n\nimport axios from \"axios\";\nimport * as d3 from \"d3\";\n\n@Component\nexport default class Play extends Vue {\n  @Prop() private play!: string;\n\n  minLengthSelectOptions = [5, 10, 15, 20, 25, 30];\n  minLengthSelectOption = 20;\n\n  playData: any = [];\n\n  allSpeakers: any = [];\n\n  mounted() {\n    this.loadData();\n\n    EventBus.$on(EVENTS.CLICK_SCENE, (scene: string) => {\n      this.goScene(scene);\n    });\n\n    EventBus.$on(EVENTS.CLICK_SPEAKER, (speaker: string) => {\n      this.goCharacter(speaker);\n    });\n  }\n\n  @Watch(\"$route\")\n  routeChanged() {\n    this.loadData();\n  }\n\n  loadData() {\n    axios\n      .get(`./plays/${this.play}.json`)\n      .then((r) => {\n        this.playData = r.data;\n        const bd = getPlayBreakdown(this.playData);\n\n        this.allSpeakers = bd.speakerAmts;\n\n        // TODO: Don't like this magic number (related to marginLeft of ridgelines)\n        runRidgelines(this.playData, 10, window.innerWidth - 300, 500, 0.6, bd.speakerAmts);\n\n        const charInteractions = getCharacterInteractions(r.data);\n        const totals = getInteractionTotals(charInteractions);\n\n        const chartWidth = (window.innerWidth - 400) / 2;\n        const chartHeight = 300;\n\n        runInteractions(totals.slice(0, 10), bd.speakerAmts, chartWidth, chartHeight);\n\n        runCharacters(bd, chartWidth - 25, chartHeight);\n\n        runPiecharts(this.playData, bd.speakerAmts, window.innerWidth - 200, 400);\n\n        // runLinegroups(groupLinesByNumber(this.playData), window.innerWidth - 250, 400);\n\n        // const qmarks = getTotalMarks(this.playData, \"?\");\n        // console.log(\"qmarks\", qmarks, (100 * qmarks.total) / qmarks.allChars);\n      })\n      .catch((e) => console.error(\"e\", e));\n  }\n\n  get plays() {\n    return plays;\n  }\n\n  get speeches() {\n    const speeches = this.getSpeechesOfMinLength(this.minLengthSelectOption);\n    // console.log(\"speeches:\", speeches);\n    return speeches;\n  }\n\n  get playLabel() {\n    return plays.find((p) => p.value === this.play)?.label;\n  }\n\n  get characters() {\n    const bd = getPlayBreakdown(this.playData);\n    // console.log(\"bd\", bd, r.data);\n    return bd.speakerAmts.map((s) => s.speaker);\n  }\n\n  get scenes() {\n    return this.playData.map((scene: any) => scene.title);\n  }\n\n  getSpeechesOfMinLength(n: number) {\n    return this.playData\n      .reduce((acc: any[], scene: any) => {\n        const speeches = getSpeeches(scene).map((s) => {\n          return { data: s, title: scene.title };\n        });\n        return [\n          //@ts-ignore\n          ...acc,\n          ...speeches,\n        ];\n      }, [])\n      .filter((speech: any) => speech.data.lines.length >= n);\n  }\n\n  getCharStyle(charIdx: number) {\n    const col = getCharColor(charIdx);\n    return {\n      color: col,\n    };\n  }\n\n  getLineStyle(speaker: string) {\n    const charIdx = this.allSpeakers.findIndex((s: any) => s.speaker === speaker);\n    const col = getCharColor(charIdx);\n\n    return {\n      textShadow: `1px 1px 5px ${col}`,\n    };\n  }\n\n  goCharacter(name: string) {\n    this.$router.push(`/${this.play}/characters/${name}`);\n  }\n\n  goScene(scene: string) {\n    this.$router.push(`/${this.play}/${scene}`);\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Play.vue?vue&type=template&id=7b6043c8&scoped=true&\"\nimport script from \"./Play.vue?vue&type=script&lang=ts&\"\nexport * from \"./Play.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Play.vue?vue&type=style&index=0&id=7b6043c8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b6043c8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Explore the Bard\")]),_c('div',_vm._l((_vm.plays),function(play){return _c('div',{key:play.value,on:{\"click\":function($event){return _vm.goPlay(play.value)}}},[_vm._v(\" \"+_vm._s(play.label)+\" \")])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport { plays } from \"@/utils\";\n\n@Component\nexport default class Play extends Vue {\n  plays = plays;\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=43d1a7b2&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=ts&\"\nexport * from \"./Home.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43d1a7b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Welcome character! \"+_vm._s(_vm.character)+\" from \"+_vm._s(_vm.play))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class Character extends Vue {\n  @Prop() private character!: string;\n\n  get play() {\n    return this.$route.params.play;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Character.vue?vue&type=template&id=cc265368&\"\nimport script from \"./Character.vue?vue&type=script&lang=ts&\"\nexport * from \"./Character.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',{staticClass:\"click\",on:{\"click\":function($event){return _vm.goPlay(_vm.play)}}},[_vm._v(_vm._s(_vm.playLabel))]),_c('div',{staticClass:\"ridges-container\"}),_c('h3',[(_vm.sceneIdx !== 0)?_c('span',{staticClass:\"click\",on:{\"click\":function($event){return _vm.goScene(_vm.prevScene)}}},[_vm._v(\"←\")]):_vm._e(),_c('span',{staticStyle:{\"margin\":\"0 1rem\"}},[_vm._v(\"Act \"+_vm._s(_vm.actNum)+\", Scene \"+_vm._s(_vm.sceneNum))]),(_vm.sceneIdx !== _vm.allScenes.length - 1)?_c('span',{staticClass:\"click\",on:{\"click\":function($event){return _vm.goScene(_vm.nextScene)}}},[_vm._v(\"→\")]):_vm._e()]),_c('div',_vm._l((_vm.characters),function(char){return _c('div',{key:char,staticClass:\"click\",style:(_vm.getCharStyle(char)),on:{\"click\":function($event){return _vm.goCharacter(char)}}},[_vm._v(\" \"+_vm._s(char)+\" \")])}),0),_c('div',_vm._l((_vm.sceneData.lines),function(line,j){return _c('div',{key:j,style:(_vm.getLineStyle(line))},[_vm._v(\" \"+_vm._s(line.value)+\" \")])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { plays, getSceneBreakdown, runRidgelines, getPlayBreakdown, getCharColor } from \"@/utils\";\nimport axios from \"axios\";\n\n@Component\nexport default class Scene extends Vue {\n  @Prop() private scene!: string;\n\n  sceneData: any = [];\n\n  sceneNum = \"0\";\n  actNum = \"0\";\n\n  allScenes: string[] = [];\n  sceneIdx = -1;\n\n  allSpeakers: any[] = [];\n\n  @Watch(\"$route\")\n  routeChanged() {\n    this.loadData();\n  }\n\n  mounted() {\n    this.loadData();\n  }\n\n  getCharStyle(char: string) {\n    const charIdx = this.allSpeakers.findIndex((s) => s.speaker === char);\n    const col = getCharColor(charIdx);\n    return {\n      color: col,\n    };\n  }\n\n  loadData() {\n    axios\n      .get(`../plays/${this.play}.json`)\n      .then((r) => {\n        const [a, s] = this.scene.split(\".\");\n        this.actNum = a;\n        this.sceneNum = s;\n        this.sceneData = r.data.find((scene: any) => scene.title === this.scene);\n        this.allScenes = r.data.map((scene: any) => scene.title);\n        this.sceneIdx = r.data.findIndex((scene: any) => scene.title === this.scene);\n\n        const bd = getPlayBreakdown(r.data);\n        this.allSpeakers = bd.speakerAmts;\n\n        // NOTE: Prob doesn't need to be so large\n        runRidgelines([this.sceneData], 2, window.innerWidth - 150, 250, 0.6, bd.speakerAmts);\n      })\n      .catch((e) => console.error(\"e\", e));\n  }\n\n  getLineStyle(line: any) {\n    const charIdx = this.allSpeakers.findIndex((s) => s.speaker === line.speaker);\n    const col = getCharColor(charIdx);\n\n    if (line.type === \"speech\") {\n      return {\n        fontWeight: \"bold\",\n        marginTop: \"25px\",\n        color: col,\n      };\n    } else {\n      return {\n        textShadow: `1px 1px 5px ${col}`,\n      };\n    }\n  }\n\n  get nextScene() {\n    return this.allScenes[this.sceneIdx + 1];\n  }\n\n  get prevScene() {\n    return this.allScenes[this.sceneIdx - 1];\n  }\n\n  get characters() {\n    const bd = getSceneBreakdown(this.sceneData);\n    // console.log(\"bd\", bd, r.data);\n    return bd.speakerAmts.map((s) => s.speaker);\n  }\n\n  get play() {\n    return this.$route.params.play;\n  }\n\n  get playLabel() {\n    return plays.find((p) => p.value === this.play)?.label;\n  }\n\n  goCharacter(name: string) {\n    this.$router.push(`/${this.play}/characters/${name}`);\n  }\n\n  goScene(scene: string) {\n    this.$router.push(`/${this.play}/${scene}`);\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scene.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scene.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Scene.vue?vue&type=template&id=70824b8c&\"\nimport script from \"./Scene.vue?vue&type=script&lang=ts&\"\nexport * from \"./Scene.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\nimport VueRouter from \"vue-router\";\nimport Play from \"@/components/Play.vue\";\nimport Home from \"@/components/Home.vue\";\nimport Character from \"@/components/Character.vue\";\nimport Scene from \"@/components/Scene.vue\";\n\nVue.use(VueRouter);\n\nconst router = new VueRouter({\n  mode: \"history\",\n  routes: [{\n    name: \"home\",\n    path: \"/\",\n    component: Home,\n  },\n  {\n    name: \"play\",\n    path: \"/:play\",\n    component: Play,\n    props: (route) => ({ play: route.params.play })\n  },\n  {\n    name: \"character\",\n    path: \"/:play/characters/:character\",\n    component: Character,\n    props: (route) => ({ character: route.params.character })\n  },\n  {\n    name: \"scene\",\n    path: \"/:play/:scene\",\n    component: Scene,\n    props: (route) => ({ scene: route.params.scene })\n  },\n  ]\n});\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  render: (h) => h(App),\n}).$mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=style&index=0&id=7b6043c8&scoped=true&lang=css&\""],"sourceRoot":""}